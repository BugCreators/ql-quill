<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../dist/ql-quill.snow.css" rel="stylesheet">
  <title>Document</title>
</head>

<body>
  <div id="editor"></div>
  <button onclick="btnClick()">修改内容</button>
  <button onclick="insertImage()">插入图片</button>
</body>

<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.20.0/axios.min.js"></script>
<script src="../dist/ql-quill.js"> </script>
<script>
  let value = "<p>hello</p>";

  const editor = new QlQuill("#editor", {
    limit: 1000,
    placeholder: "请输入作业内容...",
    image: {
      accept: ['jpg', 'jpeg', 'bmp'].map(i => `.${i}`).join(','),
      customHandlers: callback => {
        console.log('custom')
        callback("http://192.168.4.119/group1/M00/01/57/wKgBF19YPz6AEfqrAABTEqBfftU969.jpg")
      },
      action: (file, cb) => {
        const formData = new FormData();
        formData.append('file', file)
        axios({
          method: "post",
          url: "http://192.168.4.119:10013/webservice/file/saveOne",
          headers: {
            'content-type': 'application/x-www-form-urlencoded;charset=utf-8',
            token: '5327C5E33DD9478EAC858A69179CC79D'
          },
          data: formData
        }).then(res => {
          cb(res.data.data.fullUrl);
        })
      }
    },
    value,
    onChange: v => {
      console.log(v)
      value = v
    }
  });

  function btnClick() {
    editor.setContent("<p>Hi</p>")
  }

  function insertImage() {
    editor.insertImage("http://192.168.4.119/group1/M00/01/57/wKgBF19YPz6AEfqrAABTEqBfftU969.jpg")
  }

  console.log(editor)
</script>

</html>