function _defineProperty(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_unsupportedIterableToArray(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,a){if(t){if("string"==typeof t)return _arrayLikeToArray(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,a):void 0}}function _arrayLikeToArray(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}function _iterableToArrayLimit(t,a){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o=[],i=!0,s=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(o.push(n.value),!a||o.length!==a);i=!0);}catch(l){s=!0,r=l}finally{try{i||null==e.return||e.return()}finally{if(s)throw r}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,a){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((t="undefined"!=typeof globalThis?globalThis:t||self).MoColorPicker={})}(this,(function(t){"use strict";var a=/^#([a-f\d]{3}|[a-f\d]{6})$/i,e=/^rgba?\s?\(/i,n=/^hsla?\s?\(/i,r=/^hsva?\s?\(/i,o=function(t){return void 0!==t&&!isNaN(+t)&&0<=+t&&+t<=1?+t:1};function i(t,a){return t=Math.min(a,Math.max(0,t)),Math.abs(t-a)<1e-6?1:t%a/~~a}var s=function(t,a,e){t=i(t,360),a=i(100*a,100);var n=~~(6*t),r=6*t-n,o=(e=i(100*e,100))*(1-a),s=e*(1-r*a),l=e*(1-(1-r)*a),c=0,h=0,u=0;switch(n%6){case 0:c=e,h=l,u=o;break;case 1:c=s,h=e,u=o;break;case 2:c=o,h=e,u=l;break;case 3:c=o,h=s,u=e;break;case 4:c=l,h=o,u=e;break;case 5:c=e,h=o,u=s}var d=function(t){return Math.round(255*t)};return{r:d(c),g:d(h),b:d(u)}},l=function(t,a,e,n){t=i(t,255),a=i(a,255),e=i(e,255);var r,s,l=Math.max(t,a,e),c=Math.min(t,a,e),h=l,u=l-c;if(s=0===l?0:u/l,l===c)r=0;else{switch(l){case t:r=(a-e)/u+(a<e?6:0);break;case a:r=(e-t)/u+2;break;case e:r=(t-a)/u+4}r/=6}return{h:360*r,s:s,v:h,a:o(n)}},c=function(t,a,e){return{h:t,s:a*e/((t=(2-a)*e)<1?t:2-t)||0,l:t/2}},h=function(t){if(3===(t=t.replace(/^#/,"")).length){for(var a=[],e=0;e<3;e++)a.push(t[e],t[e]);t=a.join("")}return{r:parseInt([t[0],t[1]].join(""),16),g:parseInt([t[2],t[3]].join(""),16),b:parseInt([t[4],t[5]].join(""),16)}},u=function(t,a,e){var n="#";return[t,a,e].forEach((function(t){var a=t.toString(16);a.length<2&&(a="0"+a),n+=a})),n},d=function(t){if(t){if(a.test(t)){var i=h(t),s=i.r,c=i.g,u=i.b;return l(s,c,u)}if(e.test(t)){var d=_slicedToArray(t.replace(e,"").replace(/\)/,"").trim().split(",").filter((function(t){return""!==t.trim()})).map((function(t,a){return 3===a?o(t):parseInt(t,10)})),4),f=d[0],p=d[1],v=d[2],g=d[3],m=l(f,p,v);return m.a=o(g),m}var b;if(r.test(t)||(b=n.test(t))){var y=b?n:r,_=_slicedToArray(t.replace(y,"").replace(/\)/,"").trim().split(",").filter((function(t){return""!==t.trim()})).map((function(t,a){return 3===a?o(t):parseFloat(t)})),4),$=_[0],M=_[1],k=_[2],T=_[3];return b?function(t,a,e,n){return{h:t,s:2*(a*=(e*=2)<=1?e:2-e)/(e+a),v:(e+a)/2,a:o(n)}}($,M,k,T):{h:$,s:M,v:k,a:T}}}},f=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return a.querySelector(t)},p=function(t,a,e){return t.addEventListener(a,e,!1)},v=function(t,a,e){return t.removeEventListener(a,e,!1)},g=function(t){return"function"==typeof t},m={start:function(t){},drag:function(t,a){},end:function(t,a){}};function b(t){w.dragging||(t.preventDefault(),p(document,"touchmove",this._handlers.drag),p(document,"touchend",this._handlers.dragEnd),p(document,"mousemove",this._handlers.drag),p(document,"mouseup",this._handlers.dragEnd),w.dragging=!0,g(this._props.start)&&this._props.start.call(this,t))}function y(t){g(this._props.drag)&&this._props.drag.call(this,T(this._$el,t),t)}function _(t){v(document,"touchmove",this._handlers.drag),v(document,"touchend",this._handlers.dragEnd),v(document,"mousemove",this._handlers.drag),v(document,"mouseup",this._handlers.dragEnd),w.dragging=!1,"boolean"!=typeof t&&g(this._props.end)&&this._props.end.call(this,T(this._$el,t),t)}function $(t){g(this._props.end)&&this._props.end.call(this,T(this._$el,t),t)}function M(){var t=this._handlers,a=this._$el;t.dragStart=b.bind(this),t.drag=y.bind(this),t.dragEnd=_.bind(this),t.click=$.bind(this),p(a,"touchstart",t.dragStart),p(a,"mousedown",t.dragStart),p(a,"click",t.click)}function k(){var t=this._handlers,a=this._$el;v(a,"touchstart",t.dragStart),v(a,"mousedown",t.dragStart),v(a,"click",t.click),_.call(this,!1)}function T(t,a){var e,n=t.getBoundingClientRect(),r=(e="ontouchend"in document?a.changedTouches[0]:a).clientX-n.left,o=e.clientY-n.top;return{top:Math.min(Math.max(0,o),n.height),left:Math.min(Math.max(0,r),n.width)}}var w=function(){function t(a,e){_classCallCheck(this,t),this._$el=a,this._handlers=Object.create(null),this._props=Object.assign({},m,e),M.call(this)}return _createClass(t,[{key:"destroy",value:function(){k.call(this),this._$el=null,this._handlers=null}}]),t}();w.dragging=!1;var x={value:null,format:"rgb",alpha:!1,change:function(t,a){}},I=".mo-color-sat-val",S=".mo-color-hue",W=".mo-color-alpha",j=".mo-color-rail",A=".mo-color-thumb";function C(){var t=this._props,a=this._states,e=document.createElement("div");e.className="mo-color-picker",e.innerHTML='\n<div class="mo-color-sat-val">\n  <div class="mo-color-thumb" role="slider" tabindex="0">\n    <span></span>\n  </div>\n</div>\n<div class="mo-color-hue">\n  <div class="mo-color-rail"></div>\n  <div class="mo-color-thumb" role="slider" tabindex="0">\n    <span></span>\n  </div>\n</div>\n<div class="mo-color-alpha">\n  <div class="mo-color-rail"></div>\n  <div class="mo-color-thumb" role="slider" tabindex="0">\n    <span></span>\n  </div>\n</div>\n',a.$el=e,a.$sat=f(I,e),a.$hue=f(S,e),a.$alp=f(W,e),a.$satThumb=f(A,a.$sat),a.$hueThumb=f(A,a.$hue),a.$alpThumb=f(A,a.$alp),a.$alpRail=f(j,a.$alp),a.$wrap.appendChild(e),t.alpha||(a.$alp.style.display="none"),E.call(this)}function E(){var t=this._states,a=this;function e(e){var n=e.top,r=e.left,o=t.satWidth,i=t.satHeight,s=Math.round(r/o*100)/100,l=Math.round(100*(1-n/i))/100;t.s=s,t.v=l,P.call(a),N.call(a)}function n(e){var n=e.left,r=t.hueWidth;t.h=Math.round(n/r*360*100)/100,D.call(a),N.call(a)}function r(e){var n=e.left,r=t.alpWidth;t.a=Math.round(n/r*100)/100,H.call(a,!0,!1),N.call(a)}t.satDragIns=new w(t.$sat,{drag:e,end:e}),t.hueDragIns=new w(t.$hue,{drag:n,end:n}),t.alpDragIns=new w(t.$alp,{drag:r,end:r})}function O(){var t=this._states;t.satDragIns&&t.satDragIns.destroy(),t.hueDragIns&&t.hueDragIns.destroy(),t.alpDragIns&&t.alpDragIns.destroy()}function P(){var t=this._states,a=t.s,e=t.v;t.satWidth=t.satWidth||t.$sat.offsetWidth,t.satHeight=t.satHeight||t.$sat.offsetHeight;var n=Math.round((1-e)*t.satHeight),r=Math.round(a*t.satWidth),o=a<=.2&&e>=.8?"rgba(0,0,0,.7)":"white";t.$satThumb.style.cssText+="top: ".concat(n,"px; left: ").concat(r,"px; color: ").concat(o,";"),H.call(this,!1,!0)}function D(){var t=this._states,a=t.h;t.hueWidth=t.hueWidth||t.$hue.offsetWidth;var e=Math.round(a/360*t.hueWidth);t.$hueThumb.style.left=e+"px",t.$sat.style.background="hsl(".concat(a,", 100%, 50%)"),H.call(this,!1,!0)}function H(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=this._props,n=this._states;if(e.alpha){var r=n.h,o=n.s,i=n.v,s=n.a;if(t&&(n.alpWidth=n.alpWidth||n.$alp.offsetWidth,n.$alpThumb.style.left=s*n.alpWidth+"px"),a){var l=c(r,o,i);n.$alpRail.style.background="linear-gradient(to right, transparent, hsl(".concat(l.h,", ").concat(100*l.s,"%, ").concat(100*l.l,"%))")}}}function L(){P.call(this),D.call(this),H.call(this,!0,!0)}function R(t,a){var e,n,r=this._states;if(t){var o=d(t),i=o.h,l=o.s,c=o.v,h=o.a,u=s(i,l,c),f=u.r,p=u.g,v=u.b;if(void 0!==i&&(e="rgb(".concat(f,",").concat(p,",").concat(v,")"),(n=(new Option).style).color=e,(n.color||"").replace(/\s/g,"")===e))return r.h=i,r.s=l,r.v=c,r.a=h,void L.call(this)}a&&(r.h=360,r.s=1,r.v=1,r.a=1,L.call(this))}function N(){var t=this._props,a=this._states,e=a.h,n=a.s,r=a.v,o=a.a;g(t.change)&&t.change.call(this,this.getValue(),{h:e,s:n,v:r,a:o})}var V=function(){function t(a,e){_classCallCheck(this,t),this._states=Object.create(null),this._props=Object.assign({},x,e),this._states.$wrap=a,C.call(this),R.call(this,this._props.value,!0)}return _createClass(t,[{key:"setValue",value:function(t){null===t?R.call(this,null,!0):t&&R.call(this,t)}},{key:"getValue",value:function(t){var a,e=this._props,n=this._states,r=n.h,o=n.s,i=n.v,l=n.a;switch(t=t||e.format){case"hsl":var h=c(r,o,i),d=h.h,f=h.s,p=h.l;a=e.alpha?"hsla(".concat(Math.round(d),", ").concat(Math.round(100*f),"%, ").concat(Math.round(100*p),"%, ").concat(l,")"):"hsl(".concat(Math.round(d),", ").concat(Math.round(100*f),"%, ").concat(Math.round(100*p),"%)");break;case"hsv":a=e.alpha?"hsva(".concat(Math.round(r),", ").concat(Math.round(100*o),"%, ").concat(Math.round(100*i),"%, ").concat(l,")"):"hsv(".concat(Math.round(r),", ").concat(Math.round(100*o),"%, ").concat(Math.round(100*i),"%)");break;default:var v=s(r,o,i),g=v.r,m=v.g,b=v.b;a="hex"===t?u(g,m,b):e.alpha?"rgba(".concat(g,", ").concat(m,", ").concat(b,", ").concat(l,")"):"rgb(".concat(g,", ").concat(m,", ").concat(b,")")}return a}},{key:"destroy",value:function(){O.call(this),this._states.$el.parentNode.removeChild(this._states.$el),this._props=null,this._states=null}}]),t}();V.hex2rgb=h,V.rgb2hex=u,t.ColorPicker=V,t.default=V,Object.defineProperties(t,_defineProperty({__esModule:{value:!0}},Symbol.toStringTag,{value:"Module"}))}));
